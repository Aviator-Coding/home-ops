---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: open-notebook
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: onepassword-connect
  target:
    name: open-notebook
    template:
      engineVersion: v2
      data:
        # SurrealDB Connection
        SURREAL_URL: "ws://surrealdb.database.svc.cluster.local:8000/rpc"
        SURREAL_USER: "{{ .SURREAL_USER }}"
        SURREAL_PASSWORD: "{{ .SURREAL_PASSWORD }}"
        SURREAL_NAMESPACE: "open_notebook"
        SURREAL_DATABASE: "production"
        # AI Provider Keys (at least one required)
        #OPENAI_API_KEY: "{{ .OPENAI_API_KEY }}"
        #ANTHROPIC_API_KEY: "{{ .ANTHROPIC_API_KEY }}"
        # Optional: Additional AI providers
        # GOOGLE_API_KEY: "{{ .GOOGLE_API_KEY }}"
        # GROQ_API_KEY: "{{ .GROQ_API_KEY }}"
        # OPENROUTER_API_KEY: "{{ .OPENROUTER_API_KEY }}"
        # Optional: ElevenLabs for voice
        # ELEVENLABS_API_KEY: "{{ .ELEVENLABS_API_KEY }}"
        # Optional: Ollama local models
        OLLAMA_API_BASE: "http://ollama:11434"
        OPENAI_COMPATIBLE_API_KEY: "{{ .OPEN_NOTEBOOK_LITELLM_API_KEY }}"
        # Optional: Security
        OPEN_NOTEBOOK_PASSWORD: "{{ .OPEN_NOTEBOOK_PASSWORD }}"
        # Application settings
        OPENAI_COMPATIBLE_BASE_URL: "http://litellm:4000"
        LOG_LEVEL: "INFO"
        MAX_UPLOAD_SIZE: "100MB"
        ENABLE_ANALYTICS: "false"
  dataFrom:
    - extract:
        key: open-notebook
    - extract:
        key: surrealdb
